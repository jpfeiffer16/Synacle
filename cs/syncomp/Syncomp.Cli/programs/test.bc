#include "./lib/testlib.bc"

var global_state = 0;

function test_function()
{
    global_state = 123;
}

function free_test()
{
    global_state = 0;
}

category("global_state tests", () => {
    before_each(() => test_function());

    test("test_function sets global_state", () => {
        println("test");
        assert(is(global_state)->equal_to(123));
    });

    test("test_function sets global_state", () => {
        free_test();
        assert(is(global_state)->equal_to(123));
    });

    after_each(() => free_test());
});

// function test(string name, func<void> test_func)
// {
// }
// 
// test("Test", () => {
//     test("test1", () => {
// 
//     });
// });
// 
